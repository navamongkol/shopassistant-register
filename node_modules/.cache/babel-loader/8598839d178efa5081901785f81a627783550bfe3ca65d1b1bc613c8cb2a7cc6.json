{"ast":null,"code":"import { __awaiter as e, __generator as t, __assign as a } from \"tslib\";\nimport { UNKNOWN as n, UNAUTHORIZED as r } from \"@liff/consts\";\nimport { createLiffError as i, HTTPStatusCodes as s } from \"@liff/util\";\nimport { getAccessToken as o } from \"@liff/store\";\nfunction c(a) {\n  return e(this, void 0, void 0, function () {\n    var e, r, o;\n    return t(this, function (t) {\n      switch (t.label) {\n        case 0:\n          if (!a.ok) return [3, 4];\n          t.label = 1;\n        case 1:\n          return t.trys.push([1, 3,, 4]), [4, a.json()];\n        case 2:\n          return [2, t.sent()];\n        case 3:\n          return t.sent(), [2, a];\n        case 4:\n          return e = String(a.status), r = s.has(e) ? e : n, [4, a.json().catch(function () {\n            throw i(r, a.statusText);\n          })];\n        case 5:\n          throw o = t.sent(), i(o.error || r, o.error_description || o.message);\n      }\n    });\n  });\n}\nfunction u(e) {\n  var t = function (e) {\n    if (e) return e;\n    var t = o();\n    if (!t) throw i(r, \"Need access_token for api call, Please login first\");\n    return {\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\",\n      Authorization: \"Bearer \".concat(t)\n    };\n  }(e && e.headers);\n  return a(a({}, e), {\n    headers: t\n  });\n}\nfunction f(e, t) {\n  var a;\n  try {\n    a = u(t);\n  } catch (n) {\n    return Promise.reject(n);\n  }\n  return fetch(e, a).then(c);\n}\nfunction p(e, t) {\n  var a;\n  try {\n    a = u(t);\n  } catch (n) {\n    return Promise.reject(n);\n  }\n  return fetch(e, a);\n}\nfunction h(e) {\n  var t = e.subdomain,\n    a = void 0 === t ? \"api\" : t,\n    n = e.pathname;\n  return \"https://\".concat(a, \".\").concat(\"line.me\", \"/\").concat(n);\n}\nvar m = {\n  token: h({\n    pathname: \"oauth2/v2.1/token\"\n  }),\n  certs: h({\n    pathname: \"oauth2/v2.1/certs\"\n  }),\n  \"openid-configuration\": h({\n    subdomain: \"access\",\n    pathname: \".well-known/openid-configuration\"\n  }),\n  authorize: h({\n    subdomain: \"access\",\n    pathname: \"liff/v1/authorize\"\n  }),\n  profile: h({\n    pathname: \"v2/profile\"\n  }),\n  message: h({\n    pathname: \"message/v3/share\"\n  }),\n  friendship: h({\n    pathname: \"friendship/v1/status\"\n  }),\n  shareTargetPicker: h({\n    subdomain: \"access\",\n    pathname: \"oauth2/v2.1/liff/shareTargetPicker\"\n  }),\n  shareTargetPickerOtt: h({\n    pathname: \"liff/v2/apps\"\n  }),\n  shareTargetPickerResult: h({\n    subdomain: \"access\",\n    pathname: \"oauth2/v2.1/liff/shareTargetPicker/result\"\n  }),\n  apps: h({\n    pathname: \"liff/v2/apps\"\n  }),\n  subWindowGetMSIT: h({\n    pathname: \"liff/v2/sub/msit\"\n  }),\n  subWindowGetMSTByMSIT: h({\n    pathname: \"liff/v2/sub/mst\"\n  }),\n  subWindowSubscribe: h({\n    subdomain: \"liff\",\n    pathname: \"liff/v2/sub/waitResult\"\n  }),\n  subWindowPost: h({\n    pathname: \"liff/v2/sub/result\"\n  }),\n  subWindowGetAppData: h({\n    pathname: \"liff/v2/sub/appData\"\n  }),\n  subWindowGetOrigin: function (e) {\n    return h({\n      pathname: \"liff/v2/sub/\".concat(e, \"/origin\")\n    });\n  },\n  accessTokenVerify: h({\n    pathname: \"oauth2/v2.1/verify\"\n  }),\n  unauthorizedPermissions: h({\n    subdomain: \"liff\",\n    pathname: \"liff/v2/incrementalAgreement/unauthorizedPermissions\"\n  }),\n  permanentLink: h({\n    subdomain: \"liff\",\n    pathname: \"liff/v2/permanentLink\"\n  })\n};\nfunction l(e) {\n  return m[e];\n}\nfunction v(e) {\n  return f(\"\".concat(l(\"accessTokenVerify\"), \"?access_token=\").concat(encodeURIComponent(e)), {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\"\n    }\n  });\n}\nexport { f as fetch, l as getEndPoint, p as requestWithoutErrorHandling, v as verifyAccessToken };","map":{"version":3,"names":["__awaiter","e","__generator","t","__assign","a","UNKNOWN","n","UNAUTHORIZED","r","createLiffError","i","HTTPStatusCodes","s","getAccessToken","o","c","label","ok","trys","push","json","sent","String","status","has","catch","statusText","error","error_description","message","u","Accept","Authorization","concat","headers","f","Promise","reject","fetch","then","p","h","subdomain","pathname","m","token","certs","authorize","profile","friendship","shareTargetPicker","shareTargetPickerOtt","shareTargetPickerResult","apps","subWindowGetMSIT","subWindowGetMSTByMSIT","subWindowSubscribe","subWindowPost","subWindowGetAppData","subWindowGetOrigin","accessTokenVerify","unauthorizedPermissions","permanentLink","l","v","encodeURIComponent","getEndPoint","requestWithoutErrorHandling","verifyAccessToken"],"sources":["/Users/navamongkoltongta/workspace/sn2/shopassistant-register/node_modules/@liff/server-api/lib/index.es.js"],"sourcesContent":["import{__awaiter as e,__generator as t,__assign as a}from\"tslib\";import{UNKNOWN as n,UNAUTHORIZED as r}from\"@liff/consts\";import{createLiffError as i,HTTPStatusCodes as s}from\"@liff/util\";import{getAccessToken as o}from\"@liff/store\";function c(a){return e(this,void 0,void 0,(function(){var e,r,o;return t(this,(function(t){switch(t.label){case 0:if(!a.ok)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,a.json()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,a];case 4:return e=String(a.status),r=s.has(e)?e:n,[4,a.json().catch((function(){throw i(r,a.statusText)}))];case 5:throw o=t.sent(),i(o.error||r,o.error_description||o.message)}}))}))}function u(e){var t=function(e){if(e)return e;var t=o();if(!t)throw i(r,\"Need access_token for api call, Please login first\");return{\"Content-Type\":\"application/json\",Accept:\"application/json\",Authorization:\"Bearer \".concat(t)}}(e&&e.headers);return a(a({},e),{headers:t})}function f(e,t){var a;try{a=u(t)}catch(n){return Promise.reject(n)}return fetch(e,a).then(c)}function p(e,t){var a;try{a=u(t)}catch(n){return Promise.reject(n)}return fetch(e,a)}function h(e){var t=e.subdomain,a=void 0===t?\"api\":t,n=e.pathname;return\"https://\".concat(a,\".\").concat(\"line.me\",\"/\").concat(n)}var m={token:h({pathname:\"oauth2/v2.1/token\"}),certs:h({pathname:\"oauth2/v2.1/certs\"}),\"openid-configuration\":h({subdomain:\"access\",pathname:\".well-known/openid-configuration\"}),authorize:h({subdomain:\"access\",pathname:\"liff/v1/authorize\"}),profile:h({pathname:\"v2/profile\"}),message:h({pathname:\"message/v3/share\"}),friendship:h({pathname:\"friendship/v1/status\"}),shareTargetPicker:h({subdomain:\"access\",pathname:\"oauth2/v2.1/liff/shareTargetPicker\"}),shareTargetPickerOtt:h({pathname:\"liff/v2/apps\"}),shareTargetPickerResult:h({subdomain:\"access\",pathname:\"oauth2/v2.1/liff/shareTargetPicker/result\"}),apps:h({pathname:\"liff/v2/apps\"}),subWindowGetMSIT:h({pathname:\"liff/v2/sub/msit\"}),subWindowGetMSTByMSIT:h({pathname:\"liff/v2/sub/mst\"}),subWindowSubscribe:h({subdomain:\"liff\",pathname:\"liff/v2/sub/waitResult\"}),subWindowPost:h({pathname:\"liff/v2/sub/result\"}),subWindowGetAppData:h({pathname:\"liff/v2/sub/appData\"}),subWindowGetOrigin:function(e){return h({pathname:\"liff/v2/sub/\".concat(e,\"/origin\")})},accessTokenVerify:h({pathname:\"oauth2/v2.1/verify\"}),unauthorizedPermissions:h({subdomain:\"liff\",pathname:\"liff/v2/incrementalAgreement/unauthorizedPermissions\"}),permanentLink:h({subdomain:\"liff\",pathname:\"liff/v2/permanentLink\"})};function l(e){return m[e]}function v(e){return f(\"\".concat(l(\"accessTokenVerify\"),\"?access_token=\").concat(encodeURIComponent(e)),{headers:{\"Content-Type\":\"application/json\",Accept:\"application/json\"}})}export{f as fetch,l as getEndPoint,p as requestWithoutErrorHandling,v as verifyAccessToken};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}