{"ast":null,"code":"import _slicedToArray from\"/Users/navamongkoltongta/workspace/sn2/shopassistant-register/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import logo from'./logo.svg';import'./App.css';import liff from'@line/liff';import{useEffect,useState}from'react';import done_logo from'./done-icon.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var axios=require('axios');var _useState=useState(logo),_useState2=_slicedToArray(_useState,2),pictureUrl=_useState2[0],setPictureUrl=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),idToken=_useState4[0],setIdToken=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),displayName=_useState6[0],setDisplayName=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),statusMessage=_useState8[0],setStatusMessage=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),userId=_useState10[0],setUserId=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),shopeeId=_useState12[0],setShopeeId=_useState12[1];var logout=function logout(){liff.logout();window.location.reload();};var register=function register(){var jsonData={\"userIdToken\":idToken,\"userDisplayName\":displayName,\"userId\":userId,\"shopeeId\":shopeeId};var body=new FormData();body.append('userIdToken',idToken);body.append('userDisplayName',displayName);body.append('userId',userId);body.append('shopeeId',shopeeId);fetch('https://asia-southeast1-shopassistant-369117.cloudfunctions.net/insert-user',{method:'POST',mode:'no-cors',headers:{'Content-Type':'application/json'},body:body}).then(function(response){if(response.status===0){// console.log(\"Done\");\nwindow.close();}});};var initLine=function initLine(){liff.init({liffId:'1657665769-GyvV85jy'},function(){if(liff.isLoggedIn()){runApp();}else{liff.login();}},function(err){return console.error(err);});};var runApp=function runApp(){var idToken=liff.getIDToken();setIdToken(idToken);liff.getProfile().then(function(profile){console.log(profile);setDisplayName(profile.displayName);setPictureUrl(profile.pictureUrl);setStatusMessage(profile.statusMessage);setUserId(profile.userId);}).catch(function(err){return console.error(err);});};useEffect(function(){initLine();},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(\"header\",{className:\"App-header\",children:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shop Assistant Register\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"img\",{src:done_logo,style:{marginLeft:\"auto\",marginRight:\"auto\",width:\"50%\"},hidden:true}),/*#__PURE__*/_jsx(\"img\",{src:pictureUrl,width:\"300px\",height:\"300px\"}),/*#__PURE__*/_jsxs(\"p\",{style:{textAlign:\"left\",marginLeft:\"20%\",marginRight:\"20%\",wordBreak:\"break-all\"},children:[/*#__PURE__*/_jsx(\"b\",{children:\"display name: \"}),\" \",displayName]}),/*#__PURE__*/_jsx(\"form\",{style:{textAlign:\"left\",marginLeft:\"20%\",marginRight:\"20%\",wordBreak:\"break-all\"},children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Enter ShopeeId\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:shopeeId,onChange:function onChange(e){return setShopeeId(e.target.value);}})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return register();},style:{width:\"100%\",height:30},children:\"Register\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return logout();},style:{width:\"100%\",height:30},children:\"Logout\"})]})})});}export default App;","map":{"version":3,"names":["logo","liff","useEffect","useState","done_logo","App","axios","require","pictureUrl","setPictureUrl","idToken","setIdToken","displayName","setDisplayName","statusMessage","setStatusMessage","userId","setUserId","shopeeId","setShopeeId","logout","window","location","reload","register","jsonData","body","FormData","append","fetch","method","mode","headers","then","response","status","close","initLine","init","liffId","isLoggedIn","runApp","login","err","console","error","getIDToken","getProfile","profile","log","catch","textAlign","marginLeft","marginRight","width","wordBreak","e","target","value","height"],"sources":["/Users/navamongkoltongta/workspace/sn2/shopassistant-register/src/App.js"],"sourcesContent":["import logo from './logo.svg';\nimport './App.css';\nimport liff from '@line/liff';\nimport { useEffect, useState } from 'react';\nimport done_logo from './done-icon.png'\n\nfunction App() {\n  const axios = require('axios');\n  const [pictureUrl, setPictureUrl] = useState(logo);\n  const [idToken, setIdToken] = useState(\"\");\n  const [displayName, setDisplayName] = useState(\"\");\n  const [statusMessage, setStatusMessage] = useState(\"\");\n  const [userId, setUserId] = useState(\"\");\n  const [shopeeId, setShopeeId] = useState(\"\");\n\n  const logout = () => {\n    liff.logout();\n    window.location.reload();\n  }\n\n  const register = () => {\n    const jsonData = {\n          \"userIdToken\" : idToken,\n          \"userDisplayName\": displayName,\n          \"userId\" : userId,\n          \"shopeeId\" : shopeeId,\n    }\n    var body = new FormData();\n    body.append('userIdToken', idToken);\n    body.append('userDisplayName', displayName);\n    body.append('userId', userId);\n    body.append('shopeeId', shopeeId);\n    fetch('https://asia-southeast1-shopassistant-369117.cloudfunctions.net/insert-user',{\n      method: 'POST',\n      mode: 'no-cors',\n      headers: { 'Content-Type':'application/json'},\n      body: body\n    }).then((response) => {\n      if (response.status === 0) {\n        // console.log(\"Done\");\n        window.close();\n      }\n    });\n  }\n\n  const initLine = () => {\n    liff.init({ liffId: '1657665769-GyvV85jy' }, () => {\n      if (liff.isLoggedIn()) {\n        runApp();\n      } else {\n        liff.login();\n      }\n    }, err => console.error(err));\n  }\n\n  const runApp = () => {\n    const idToken = liff.getIDToken();\n    setIdToken(idToken);\n    liff.getProfile().then(profile => {\n      console.log(profile);\n      setDisplayName(profile.displayName);\n      setPictureUrl(profile.pictureUrl);\n      setStatusMessage(profile.statusMessage);\n      setUserId(profile.userId);\n    }).catch(err => console.error(err));\n  }\n\n  useEffect(() => {\n    initLine();\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n      <div style={{ textAlign: \"center\" }}>\n        <h1>Shop Assistant Register</h1>\n        <hr/>\n        <img src={done_logo} style={{marginLeft:\"auto\", marginRight:\"auto\", width:\"50%\"}} hidden></img>\n        <img src={pictureUrl} width=\"300px\" height=\"300px\"/>\n        <p style={{ textAlign: \"left\", marginLeft: \"20%\", marginRight: \"20%\", wordBreak: \"break-all\" }}><b>display name: </b> {displayName}</p>\n        <form style={{ textAlign: \"left\", marginLeft: \"20%\", marginRight: \"20%\", wordBreak: \"break-all\" }}>\n          <label><b>Enter ShopeeId</b>\n            <input \n              type=\"text\" \n              value={shopeeId}\n              onChange={(e) => setShopeeId(e.target.value)}\n            />\n          </label>\n        </form>\n        \n\n        <button onClick={() => register()} style={{ width: \"100%\", height: 30 }}>Register</button>\n        <button onClick={() => logout()} style={{ width: \"100%\", height: 30 }}>Logout</button>\n      </div>\n      </header>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}