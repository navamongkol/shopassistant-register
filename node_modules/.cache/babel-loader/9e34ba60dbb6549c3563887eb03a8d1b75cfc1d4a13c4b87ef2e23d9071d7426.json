{"ast":null,"code":"import { __assign as e, __awaiter as t, __generator as n } from \"tslib\";\nimport { createLiffError as i, randomAlphaNumericString as r } from \"@liff/util\";\nimport { SUB_WINDOW_STATUS as s, UNKNOWN as a } from \"@liff/consts\";\nvar o = \"liff.subwindow.identifier\",\n  c = \"liff.subwindow.cryptokey\",\n  d = e(e({}, s), {\n    GET_DATA: \"getData\",\n    SET_DATA: \"setData\",\n    NOT_FOUND: \"notFound\",\n    TEARDOWN: \"teardown\"\n  }),\n  u = {\n    BROADCAST: \"broadcast\",\n    COMMAND: \"command\"\n  },\n  f = {\n    MAIN: \"main\",\n    SUB: \"sub\"\n  },\n  l = \"__liff_message_bus__\",\n  h = \"bFSQbce18HC7UXe-lS_mgg\",\n  v = function v(e) {\n    return t(void 0, void 0, void 0, function () {\n      var t;\n      return n(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return n.trys.push([0, 2,, 3]), [4, window.crypto.subtle.importKey(\"jwk\", {\n              kty: \"oct\",\n              k: e,\n              alg: \"A128GCM\",\n              ext: !0\n            }, {\n              name: \"AES-GCM\"\n            }, !1, [\"encrypt\", \"decrypt\"])];\n          case 1:\n            return [2, n.sent()];\n          case 2:\n            throw t = n.sent(), i(a, t);\n          case 3:\n            return [2];\n        }\n      });\n    });\n  },\n  p = function p(e, r, s) {\n    return t(void 0, void 0, void 0, function () {\n      var t, o, c, d;\n      return n(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return n.trys.push([0, 3,, 4]), t = new TextEncoder().encode(e), [4, v(r)];\n          case 1:\n            return o = n.sent(), [4, window.crypto.subtle.encrypt({\n              name: \"AES-GCM\",\n              iv: t\n            }, o, new TextEncoder().encode(s))];\n          case 2:\n            return c = n.sent(), [2, btoa(new Uint8Array(c).reduce(function (e, t) {\n              return e + String.fromCharCode(t);\n            }, \"\"))];\n          case 3:\n            throw d = n.sent(), i(a, d);\n          case 4:\n            return [2];\n        }\n      });\n    });\n  },\n  m = function m(e, r, s) {\n    return t(void 0, void 0, void 0, function () {\n      var t, o, c, d, u, f, l;\n      return n(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return n.trys.push([0, 3,, 4]), t = new TextEncoder().encode(e), [4, v(r)];\n          case 1:\n            for (o = n.sent(), c = atob(s), d = new Uint8Array(c.length), u = 0; u < c.length; u++) {\n              d[u] = c.charCodeAt(u);\n            }\n            return [4, window.crypto.subtle.decrypt({\n              name: \"AES-GCM\",\n              iv: t\n            }, o, d.buffer)];\n          case 2:\n            return f = n.sent(), [2, new TextDecoder().decode(new Uint8Array(f))];\n          case 3:\n            throw l = n.sent(), i(a, l);\n          case 4:\n            return [2];\n        }\n      });\n    });\n  },\n  w = function w(e, t) {\n    return y(e) === y(t);\n  },\n  y = function y(e) {\n    return \"\".concat(e.identifier, \"-\").concat(e.action, \"-\").concat(e.timestamp);\n  },\n  g = function g(e) {\n    return Object.keys(s).map(function (e) {\n      return s[e];\n    }).includes(e) ? u.BROADCAST : u.COMMAND;\n  };\nfunction b() {\n  var e = document.createElement(\"form\");\n  e.method = \"POST\", e.action = \"$MESSAGE_HANDLER_URL\";\n  var t = document.createElement(\"input\");\n  t.type = \"hidden\", t.name = \"identifier\", t.value = \"$IDENTIFIER\", e.appendChild(t), document.body.appendChild(e), e.submit();\n}\nvar E = function E(s) {\n  void 0 === s && (s = f.MAIN);\n  var o = this;\n  this.identification = {\n    identifier: \"\",\n    cryptoKey: \"\"\n  }, this.messageHandlerInstance = null, this.listeners = new Map(), this.sentMessages = [], this.generateIdentification = function () {\n    return t(o, void 0, void 0, function () {\n      var e, s, o, d, u;\n      return n(this, function (l) {\n        switch (l.label) {\n          case 0:\n            return e = new URLSearchParams(window.location.search), s = function s(t) {\n              var n = e.get(\"liff.state\");\n              return n ? new URLSearchParams(n).get(t) : null;\n            }, o = this, u = {\n              identifier: this.windowType === f.MAIN ? r(12) : e.get(\"liff.subwindow.identifier\") || s(\"liff.subwindow.identifier\") || \"\"\n            }, this.windowType !== f.MAIN ? [3, 2] : [4, t(void 0, void 0, void 0, function () {\n              var e, t, r;\n              return n(this, function (n) {\n                switch (n.label) {\n                  case 0:\n                    return n.trys.push([0, 3,, 4]), [4, window.crypto.subtle.generateKey({\n                      name: \"AES-GCM\",\n                      length: 128\n                    }, !0, [\"encrypt\", \"decrypt\"])];\n                  case 1:\n                    return e = n.sent(), [4, window.crypto.subtle.exportKey(\"jwk\", e)];\n                  case 2:\n                    if (!(t = n.sent()) || !t.k) throw i(a, \"failed to generate key\");\n                    return [2, t.k];\n                  case 3:\n                    throw r = n.sent(), i(a, r);\n                  case 4:\n                    return [2];\n                }\n              });\n            })];\n          case 1:\n            return d = l.sent(), [3, 3];\n          case 2:\n            d = e.get(c) || s(c) || \"\", l.label = 3;\n          case 3:\n            return o.identification = (u.cryptoKey = d, u), [2];\n        }\n      });\n    });\n  }, this.hasIdentification = function () {\n    var e = o.identification,\n      t = e.identifier,\n      n = e.cryptoKey;\n    return \"string\" == typeof t && \"string\" == typeof n && t.length > 0 && n.length > 0;\n  }, this.isReady = function () {\n    return o.hasIdentification() && !!o.messageHandlerInstance;\n  }, this.setup = function () {\n    return t(o, void 0, void 0, function () {\n      var e,\n        t,\n        r,\n        s,\n        o,\n        c = this;\n      return n(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return this.messageHandlerInstance ? [2] : [4, this.generateIdentification()];\n          case 1:\n            if (n.sent(), !(e = this.identification.identifier)) return [2];\n            if (t = /^[a-zA-Z0-9]+$/gm, !e.match(t)) throw i(a, \"Invalid identifier\");\n            return (r = document.createElement(\"iframe\")).style.display = \"none\", r.src = \"about:blank\", document.body.appendChild(r), null === (o = null == r ? void 0 : r.contentWindow) || void 0 === o || o.window.eval(\"(\".concat(b.toString().replace(\"$MESSAGE_HANDLER_URL\", \"\".concat(\"https://liff-subwindow.line.me/liff/v2/sub/messageHandler\")).replace(\"$IDENTIFIER\", e.split(\"'\")[0]), \")()\")), s = \"iframe-\".concat(e, \"-ready\"), [4, new Promise(function (e) {\n              var t = function t(n) {\n                n.data[s] && (c.messageHandlerInstance = r, window.addEventListener(\"message\", c.proxyToListeners), e(), document.removeEventListener(\"message\", t));\n              };\n              window.addEventListener(\"message\", t);\n            })];\n          case 2:\n            return [2, n.sent()];\n        }\n      });\n    });\n  }, this.teardown = function () {\n    return t(o, void 0, void 0, function () {\n      var e, t;\n      return n(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return this.isReady() ? [4, this.send({\n              eventName: d.TEARDOWN\n            })] : [3, 2];\n          case 1:\n            n.sent(), window.removeEventListener(\"message\", this.proxyToListeners), this.listeners.clear(), null === (t = null === (e = this.messageHandlerInstance) || void 0 === e ? void 0 : e.parentNode) || void 0 === t || t.removeChild(this.messageHandlerInstance), this.messageHandlerInstance = null, n.label = 2;\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, this.listen = function (e) {\n    o.listeners.set(e, e);\n  }, this.listenRepliedEvent = function (e, t) {\n    var n = function n(i) {\n      i.replyTarget && w(i.replyTarget, e) && (t(i), o.listeners.delete(n));\n    };\n    o.listeners.set(n, n);\n  }, this.send = function (e) {\n    return t(o, void 0, void 0, function () {\n      var t,\n        r,\n        s,\n        a,\n        o = this;\n      return n(this, function (n) {\n        switch (n.label) {\n          case 0:\n            if (!this.isReady()) throw i(\"message bus is not ready to send message\");\n            return r = {\n              action: g(e.eventName),\n              identifier: this.identification.identifier || \"\",\n              timestamp: new Date().getTime()\n            }, [4, this.getEncryptedContext(e)];\n          case 1:\n            return r.context = n.sent(), t = r, null === (a = null === (s = this.messageHandlerInstance) || void 0 === s ? void 0 : s.contentWindow) || void 0 === a || a.postMessage({\n              messageBusEvent: t\n            }, \"*\"), this.sentMessages.push(y(t)), [4, new Promise(function (e) {\n              o.listenRepliedEvent(t, function (t) {\n                e(t.context);\n              });\n            })];\n          case 2:\n            return [2, n.sent()];\n        }\n      });\n    });\n  }, this.reply = function (e, r) {\n    return t(o, void 0, void 0, function () {\n      var t, s, o, c;\n      return n(this, function (n) {\n        switch (n.label) {\n          case 0:\n            if (!this.isReady()) throw i(\"message bus is not ready to send message\");\n            if (!e.identifier || !e.timestamp) throw i(a, \"target message is not valid\");\n            return s = {\n              action: u.BROADCAST\n            }, [4, this.getEncryptedContext(r)];\n          case 1:\n            return s.context = n.sent(), s.identifier = this.identification.identifier || \"\", s.timestamp = new Date().getTime(), s.replyTarget = {\n              action: e.action,\n              identifier: e.identifier,\n              timestamp: e.timestamp\n            }, t = s, null === (c = null === (o = this.messageHandlerInstance) || void 0 === o ? void 0 : o.contentWindow) || void 0 === c || c.postMessage({\n              messageBusEvent: t\n            }, \"*\"), this.sentMessages.push(y(t)), [2];\n        }\n      });\n    });\n  }, this.setData = function (e, t) {\n    void 0 === e && (e = \"appData\"), o.send({\n      eventName: d.SET_DATA,\n      key: e,\n      data: t\n    });\n  }, this.getData = function (e) {\n    return void 0 === e && (e = \"appData\"), t(o, void 0, void 0, function () {\n      return n(this, function (t) {\n        switch (t.label) {\n          case 0:\n            return [4, this.send({\n              eventName: d.GET_DATA,\n              key: e\n            })];\n          case 1:\n            return [2, t.sent()];\n        }\n      });\n    });\n  }, this.proxyToListeners = function (i) {\n    return t(o, void 0, void 0, function () {\n      var r,\n        s = this;\n      return n(this, function (a) {\n        return (r = i.data.messageBusEvent) ? (this.sentMessages.includes(y(r)) || r.identifier !== this.identification.identifier || r.action !== u.BROADCAST && !r.replyTarget || this.listeners.forEach(function (i) {\n          return t(s, void 0, void 0, function () {\n            var t, s, a;\n            return n(this, function (n) {\n              switch (n.label) {\n                case 0:\n                  return t = i, s = [e({}, r)], a = {}, [4, this.getDecryptedContext(r.context)];\n                case 1:\n                  return t.apply(void 0, [e.apply(void 0, s.concat([(a.context = n.sent(), a)]))]), [2];\n              }\n            });\n          });\n        }), [2]) : [2];\n      });\n    });\n  }, this.getEncryptedContext = function (e) {\n    return t(o, void 0, void 0, function () {\n      var t, i, r, s, a, o, c;\n      return n(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return t = this.identification, i = t.identifier, r = t.cryptoKey, a = (s = JSON).stringify, c = {\n              eventName: e.eventName,\n              key: e.key ? e.key : void 0\n            }, e.data ? [4, p(i, r, JSON.stringify(e.data))] : [3, 2];\n          case 1:\n            return o = n.sent(), [3, 3];\n          case 2:\n            o = void 0, n.label = 3;\n          case 3:\n            return [2, a.apply(s, [(c.data = o, c)])];\n        }\n      });\n    });\n  }, this.getDecryptedContext = function (i) {\n    return t(o, void 0, void 0, function () {\n      var t, r, s, a, o, c, d, u;\n      return n(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return t = this.identification, r = t.identifier, s = t.cryptoKey, (a = JSON.parse(i)).data && \"string\" == typeof a.data ? (u = (d = JSON).parse, [4, m(r, s, a.data)]) : [3, 2];\n          case 1:\n            return c = u.apply(d, [n.sent()]), [3, 3];\n          case 2:\n            c = void 0, n.label = 3;\n          case 3:\n            return o = c, [2, e(e({}, a), {\n              data: o\n            })];\n        }\n      });\n    });\n  }, this.windowType = s;\n};\nexport { u as ACTION, c as CRYPTO_KEY, d as EVENT_NAME, l as GLOBAL_MESSAGE_BUS_IDENTIFIER, h as GLOBAL_MESSAGE_BUS_KEY, o as IDENTIFIER_KEY, E as MessageBus, f as WINDOW, g as getEventAction, y as getUniqId, w as isSameEvent, b as loadMessageHandlerPage };","map":{"version":3,"names":["__assign","e","__awaiter","t","__generator","n","createLiffError","i","randomAlphaNumericString","r","SUB_WINDOW_STATUS","s","UNKNOWN","a","o","c","d","GET_DATA","SET_DATA","NOT_FOUND","TEARDOWN","u","BROADCAST","COMMAND","f","MAIN","SUB","l","h","v","label","trys","push","window","crypto","subtle","importKey","kty","k","alg","ext","name","sent","p","TextEncoder","encode","encrypt","iv","btoa","Uint8Array","reduce","String","fromCharCode","m","atob","length","charCodeAt","decrypt","buffer","TextDecoder","decode","w","y","concat","identifier","action","timestamp","g","Object","keys","map","includes","b","document","createElement","method","type","value","appendChild","body","submit","E","identification","cryptoKey","messageHandlerInstance","listeners","Map","sentMessages","generateIdentification","URLSearchParams","location","search","get","windowType","generateKey","exportKey","hasIdentification","isReady","setup","match","style","display","src","contentWindow","eval","toString","replace","split","Promise","data","addEventListener","proxyToListeners","removeEventListener","teardown","send","eventName","clear","parentNode","removeChild","listen","set","listenRepliedEvent","replyTarget","delete","Date","getTime","getEncryptedContext","context","postMessage","messageBusEvent","reply","setData","key","getData","forEach","getDecryptedContext","apply","JSON","stringify","parse","ACTION","CRYPTO_KEY","EVENT_NAME","GLOBAL_MESSAGE_BUS_IDENTIFIER","GLOBAL_MESSAGE_BUS_KEY","IDENTIFIER_KEY","MessageBus","WINDOW","getEventAction","getUniqId","isSameEvent","loadMessageHandlerPage"],"sources":["/Users/navamongkoltongta/workspace/sn2/shopassistant-register/node_modules/@liff/message-bus/lib/index.es.js"],"sourcesContent":["import{__assign as e,__awaiter as t,__generator as n}from\"tslib\";import{createLiffError as i,randomAlphaNumericString as r}from\"@liff/util\";import{SUB_WINDOW_STATUS as s,UNKNOWN as a}from\"@liff/consts\";var o=\"liff.subwindow.identifier\",c=\"liff.subwindow.cryptokey\",d=e(e({},s),{GET_DATA:\"getData\",SET_DATA:\"setData\",NOT_FOUND:\"notFound\",TEARDOWN:\"teardown\"}),u={BROADCAST:\"broadcast\",COMMAND:\"command\"},f={MAIN:\"main\",SUB:\"sub\"},l=\"__liff_message_bus__\",h=\"bFSQbce18HC7UXe-lS_mgg\",v=function(e){return t(void 0,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,window.crypto.subtle.importKey(\"jwk\",{kty:\"oct\",k:e,alg:\"A128GCM\",ext:!0},{name:\"AES-GCM\"},!1,[\"encrypt\",\"decrypt\"])];case 1:return[2,n.sent()];case 2:throw t=n.sent(),i(a,t);case 3:return[2]}}))}))},p=function(e,r,s){return t(void 0,void 0,void 0,(function(){var t,o,c,d;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),t=(new TextEncoder).encode(e),[4,v(r)];case 1:return o=n.sent(),[4,window.crypto.subtle.encrypt({name:\"AES-GCM\",iv:t},o,(new TextEncoder).encode(s))];case 2:return c=n.sent(),[2,btoa(new Uint8Array(c).reduce((function(e,t){return e+String.fromCharCode(t)}),\"\"))];case 3:throw d=n.sent(),i(a,d);case 4:return[2]}}))}))},m=function(e,r,s){return t(void 0,void 0,void 0,(function(){var t,o,c,d,u,f,l;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),t=(new TextEncoder).encode(e),[4,v(r)];case 1:for(o=n.sent(),c=atob(s),d=new Uint8Array(c.length),u=0;u<c.length;u++)d[u]=c.charCodeAt(u);return[4,window.crypto.subtle.decrypt({name:\"AES-GCM\",iv:t},o,d.buffer)];case 2:return f=n.sent(),[2,(new TextDecoder).decode(new Uint8Array(f))];case 3:throw l=n.sent(),i(a,l);case 4:return[2]}}))}))},w=function(e,t){return y(e)===y(t)},y=function(e){return\"\".concat(e.identifier,\"-\").concat(e.action,\"-\").concat(e.timestamp)},g=function(e){return Object.keys(s).map((function(e){return s[e]})).includes(e)?u.BROADCAST:u.COMMAND};function b(){var e=document.createElement(\"form\");e.method=\"POST\",e.action=\"$MESSAGE_HANDLER_URL\";var t=document.createElement(\"input\");t.type=\"hidden\",t.name=\"identifier\",t.value=\"$IDENTIFIER\",e.appendChild(t),document.body.appendChild(e),e.submit()}var E=function(s){void 0===s&&(s=f.MAIN);var o=this;this.identification={identifier:\"\",cryptoKey:\"\"},this.messageHandlerInstance=null,this.listeners=new Map,this.sentMessages=[],this.generateIdentification=function(){return t(o,void 0,void 0,(function(){var e,s,o,d,u;return n(this,(function(l){switch(l.label){case 0:return e=new URLSearchParams(window.location.search),s=function(t){var n=e.get(\"liff.state\");return n?new URLSearchParams(n).get(t):null},o=this,u={identifier:this.windowType===f.MAIN?r(12):e.get(\"liff.subwindow.identifier\")||s(\"liff.subwindow.identifier\")||\"\"},this.windowType!==f.MAIN?[3,2]:[4,t(void 0,void 0,void 0,(function(){var e,t,r;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,window.crypto.subtle.generateKey({name:\"AES-GCM\",length:128},!0,[\"encrypt\",\"decrypt\"])];case 1:return e=n.sent(),[4,window.crypto.subtle.exportKey(\"jwk\",e)];case 2:if(!(t=n.sent())||!t.k)throw i(a,\"failed to generate key\");return[2,t.k];case 3:throw r=n.sent(),i(a,r);case 4:return[2]}}))}))];case 1:return d=l.sent(),[3,3];case 2:d=e.get(c)||s(c)||\"\",l.label=3;case 3:return o.identification=(u.cryptoKey=d,u),[2]}}))}))},this.hasIdentification=function(){var e=o.identification,t=e.identifier,n=e.cryptoKey;return\"string\"==typeof t&&\"string\"==typeof n&&t.length>0&&n.length>0},this.isReady=function(){return o.hasIdentification()&&!!o.messageHandlerInstance},this.setup=function(){return t(o,void 0,void 0,(function(){var e,t,r,s,o,c=this;return n(this,(function(n){switch(n.label){case 0:return this.messageHandlerInstance?[2]:[4,this.generateIdentification()];case 1:if(n.sent(),!(e=this.identification.identifier))return[2];if(t=/^[a-zA-Z0-9]+$/gm,!e.match(t))throw i(a,\"Invalid identifier\");return(r=document.createElement(\"iframe\")).style.display=\"none\",r.src=\"about:blank\",document.body.appendChild(r),null===(o=null==r?void 0:r.contentWindow)||void 0===o||o.window.eval(\"(\".concat(b.toString().replace(\"$MESSAGE_HANDLER_URL\",\"\".concat(\"https://liff-subwindow.line.me/liff/v2/sub/messageHandler\")).replace(\"$IDENTIFIER\",e.split(\"'\")[0]),\")()\")),s=\"iframe-\".concat(e,\"-ready\"),[4,new Promise((function(e){var t=function(n){n.data[s]&&(c.messageHandlerInstance=r,window.addEventListener(\"message\",c.proxyToListeners),e(),document.removeEventListener(\"message\",t))};window.addEventListener(\"message\",t)}))];case 2:return[2,n.sent()]}}))}))},this.teardown=function(){return t(o,void 0,void 0,(function(){var e,t;return n(this,(function(n){switch(n.label){case 0:return this.isReady()?[4,this.send({eventName:d.TEARDOWN})]:[3,2];case 1:n.sent(),window.removeEventListener(\"message\",this.proxyToListeners),this.listeners.clear(),null===(t=null===(e=this.messageHandlerInstance)||void 0===e?void 0:e.parentNode)||void 0===t||t.removeChild(this.messageHandlerInstance),this.messageHandlerInstance=null,n.label=2;case 2:return[2]}}))}))},this.listen=function(e){o.listeners.set(e,e)},this.listenRepliedEvent=function(e,t){var n=function(i){i.replyTarget&&w(i.replyTarget,e)&&(t(i),o.listeners.delete(n))};o.listeners.set(n,n)},this.send=function(e){return t(o,void 0,void 0,(function(){var t,r,s,a,o=this;return n(this,(function(n){switch(n.label){case 0:if(!this.isReady())throw i(\"message bus is not ready to send message\");return r={action:g(e.eventName),identifier:this.identification.identifier||\"\",timestamp:(new Date).getTime()},[4,this.getEncryptedContext(e)];case 1:return r.context=n.sent(),t=r,null===(a=null===(s=this.messageHandlerInstance)||void 0===s?void 0:s.contentWindow)||void 0===a||a.postMessage({messageBusEvent:t},\"*\"),this.sentMessages.push(y(t)),[4,new Promise((function(e){o.listenRepliedEvent(t,(function(t){e(t.context)}))}))];case 2:return[2,n.sent()]}}))}))},this.reply=function(e,r){return t(o,void 0,void 0,(function(){var t,s,o,c;return n(this,(function(n){switch(n.label){case 0:if(!this.isReady())throw i(\"message bus is not ready to send message\");if(!e.identifier||!e.timestamp)throw i(a,\"target message is not valid\");return s={action:u.BROADCAST},[4,this.getEncryptedContext(r)];case 1:return s.context=n.sent(),s.identifier=this.identification.identifier||\"\",s.timestamp=(new Date).getTime(),s.replyTarget={action:e.action,identifier:e.identifier,timestamp:e.timestamp},t=s,null===(c=null===(o=this.messageHandlerInstance)||void 0===o?void 0:o.contentWindow)||void 0===c||c.postMessage({messageBusEvent:t},\"*\"),this.sentMessages.push(y(t)),[2]}}))}))},this.setData=function(e,t){void 0===e&&(e=\"appData\"),o.send({eventName:d.SET_DATA,key:e,data:t})},this.getData=function(e){return void 0===e&&(e=\"appData\"),t(o,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,this.send({eventName:d.GET_DATA,key:e})];case 1:return[2,t.sent()]}}))}))},this.proxyToListeners=function(i){return t(o,void 0,void 0,(function(){var r,s=this;return n(this,(function(a){return(r=i.data.messageBusEvent)?(this.sentMessages.includes(y(r))||r.identifier!==this.identification.identifier||r.action!==u.BROADCAST&&!r.replyTarget||this.listeners.forEach((function(i){return t(s,void 0,void 0,(function(){var t,s,a;return n(this,(function(n){switch(n.label){case 0:return t=i,s=[e({},r)],a={},[4,this.getDecryptedContext(r.context)];case 1:return t.apply(void 0,[e.apply(void 0,s.concat([(a.context=n.sent(),a)]))]),[2]}}))}))})),[2]):[2]}))}))},this.getEncryptedContext=function(e){return t(o,void 0,void 0,(function(){var t,i,r,s,a,o,c;return n(this,(function(n){switch(n.label){case 0:return t=this.identification,i=t.identifier,r=t.cryptoKey,a=(s=JSON).stringify,c={eventName:e.eventName,key:e.key?e.key:void 0},e.data?[4,p(i,r,JSON.stringify(e.data))]:[3,2];case 1:return o=n.sent(),[3,3];case 2:o=void 0,n.label=3;case 3:return[2,a.apply(s,[(c.data=o,c)])]}}))}))},this.getDecryptedContext=function(i){return t(o,void 0,void 0,(function(){var t,r,s,a,o,c,d,u;return n(this,(function(n){switch(n.label){case 0:return t=this.identification,r=t.identifier,s=t.cryptoKey,(a=JSON.parse(i)).data&&\"string\"==typeof a.data?(u=(d=JSON).parse,[4,m(r,s,a.data)]):[3,2];case 1:return c=u.apply(d,[n.sent()]),[3,3];case 2:c=void 0,n.label=3;case 3:return o=c,[2,e(e({},a),{data:o})]}}))}))},this.windowType=s};export{u as ACTION,c as CRYPTO_KEY,d as EVENT_NAME,l as GLOBAL_MESSAGE_BUS_IDENTIFIER,h as GLOBAL_MESSAGE_BUS_KEY,o as IDENTIFIER_KEY,E as MessageBus,f as WINDOW,g as getEventAction,y as getUniqId,w as isSameEvent,b as loadMessageHandlerPage};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}